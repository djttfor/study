### 加权随机算法

>加权随机算法是深度学习中的常见算法，一般应用在以下场景：有一个集合S，里面比如有A,B,C,D这四项。这时我们想随机从中抽取一项，但是抽取的概率不同，比如我们希望抽到A的概率是50%,抽到B和C的概率是20%,D的概率是10%。一般来说，我们可以给各项附一个权重，抽取的概率正比于这个权重。

```java
class A{
    public static void main(String[] args) {
        List<Node<String>> nodes = Arrays.asList(
                new Node<String>("A", 5),
                new Node<String>("B", 2),
                new Node<String>("C", 2),
                new Node<String>("D", 1)
                );
        for (int i = 0; i < 10; i++) {
            System.out.println(selectNode(nodes));
        }
    }
    @Data
    public static class Node<T>{
        T t;
        Integer weight;

        public Node(T t, Integer weight) {
            this.t = t;
            this.weight = weight;
        }
    }
    public static <T> Node<T> selectNode(List<Node<T>> nodes){
        Random random = new Random();
        //计算总权重
        AtomicInteger totalWeight = new AtomicInteger(0);
        for (Node<T> node : nodes) {
            totalWeight.getAndAdd(node.getWeight());
        }
        if(totalWeight.get()>0){
            int offset = random.nextInt(totalWeight.get());
            System.out.println("随机值："+offset);
            for (Node<T> node : nodes) {
                //随机值减去权重值，当offset小于0时就是选中的那个node
                offset -= node.getWeight();
                if(offset < 0){
                    return node;
                }
            }
        }
        return nodes.get(random.nextInt(nodes.size()));
    }
}
```

