<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>主页</title>
    <link rel="stylesheet" href="/css/index.css">
</head>
<body>
欢迎您
<div >
    <div style="text-align: center ;border: 3px solid red;margin-left: 50px;margin-right: 50px">
        首页
        <div style="float: right"><a href="/user/login/toPage">登录</a></div>
<!--        <input type="text" name="_csrf" th:value="${_csrf.token}" id="csrft">-->
        <div style="float: right"><a href="/exit">登出</a></div>
        <div style="float: right"><a href="javascript:void (0)" onclick="test2()">test2</a></div>
        <div style="float: right;margin-right: 30px"><a href="javascript:void (0)" onclick="test3()">查询所有账户</a></div>
        <div style="float: right;margin-right: 30px"><a href="javascript:void (0)" onclick="test4()">获取访问统计</a></div>
    </div>
</div>
<div id="app">
    <div id="d1" >
        <p style="background-color: pink">LEVEL1</p>
        <ul>
            <li><a href="javascript:void(0)" onclick="toL1('1')">1</a></li>
            <li><a href="/user/l1/2">2</a></li>
            <li><a href="/user/l1/3">3</a></li>
        </ul>
    </div>
    <div id="d2">
        <p style="background-color: orange">LEVEL2</p>
        <ul>
            <li><a href="/user/l2/1">1</a></li>
            <li><a href="/user/l2/2">2</a></li>
            <li><a href="/user/l2/3">3</a></li>
        </ul>
    </div>
    <div id="d3">
        <p style="background-color: yellow">LEVEL3</p>
        <ul>
            <li><a href="/user/l3/1">1</a></li>
            <li><a href="/user/l3/2">2</a></li>
            <li><a href="/user/l3/3">3</a></li>
        </ul>
    </div>
    <div><a href="/demo/t1">去t1界面</a></div>
</div>
<div>
    <a href="javascript:void (0)" onclick="itest">提交</a>
</div>
</body>
<script src="/js/jquery-3.3.1.min.js"></script>
<script>
    function test4(){
        $.ajax({
                type:"get",
                url:`/user/getVisitCount`,
                contentType:"application/json;charset=utf-8",
                dataType:"json",
                success: function (result) {
                    alert(result)
                },
                error:function (error) {
                    alert(error)
                }
            }
        )
    }

    function test3(){
        $.ajax({
                type:"get",
                url:`/user/all`,
                contentType:"application/json;charset=utf-8",
                dataType:"json",
                success: function (result) {
                    let str = '';
                    for (let resultElement of result) {
                        str += Object.values(resultElement);
                    }
                    alert(str)
                },
                error:function (error) {
                    alert(error)
                }
            }
        )
    }

    function test2(){
        let data={};
        data.username = "aaa";
        data.password = "bbb";
        data.csrfmiddlewaretoken = $('#csrft').val();
        data = JSON.stringify(data);
        alert(data)
        $.ajax({
                type:"post",
                url:`/user/test2`,
                contentType:"application/json;charset=utf-8",
                dataType:"json",
                data:data,
                success: function (result) {
                    alert(Object.values(result))
                    //console.log(result)
                },
                error:function (error) {
                    alert(error)
                }
            }
        )
    }
</script>
</html>
